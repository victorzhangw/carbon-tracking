# 🚀 Android App 快速建置指南

## 📋 檢查清單

在開始之前，確認以下項目：

- [ ] 已安裝 Android Studio
- [ ] 已安裝 JDK 11+
- [ ] 已下載 Android SDK
- [ ] Flask 後端可以運行

---

## ⚡ 5 分鐘快速開始

### Step 1: 開啟專案（1 分鐘）

```
1. 啟動 Android Studio
2. File > Open
3. 選擇 android_app 資料夾
4. 等待 Gradle 同步（首次較久）
```

### Step 2: 加入 Icons（1 分鐘）

```
方法 A: 自動生成（推薦）
1. 右鍵點擊 res 資料夾
2. New > Image Asset
3. Icon Type: Launcher Icons (Adaptive and Legacy)
4. Path: 選擇 ../static/icons/icon-512x512.png
5. Next > Finish

方法 B: 手動複製
1. 複製 static/icons/ 下的所有圖示
2. 貼到對應的 mipmap-*/ 資料夾
```

### Step 3: 設定網址（30 秒）

```kotlin
// 編輯 MainActivity.kt (第 24 行)

// 模擬器測試
private val SERVER_URL = "http://10.0.2.2:5000/carbon/"

// 實體手機測試（替換成你的電腦 IP）
// private val SERVER_URL = "http://192.168.1.100:5000/carbon/"
```

### Step 4: 啟動後端（30 秒）

```bash
# 在專案根目錄
python app.py

# 確認運行在 http://localhost:5000
```

### Step 5: 執行 App（2 分鐘）

```
1. 點擊 Run (綠色播放按鈕)
2. 選擇模擬器或實體裝置
3. 等待安裝完成
4. App 自動啟動
```

---

## 🎯 常見情境

### 情境 A: 只想快速測試

```
1. 使用模擬器
2. 網址設定：http://10.0.2.2:5000/carbon/
3. 直接 Run
```

### 情境 B: 在實體手機測試

```
1. 查詢電腦 IP
   Windows: ipconfig
   Mac/Linux: ifconfig

2. 修改網址：http://你的IP:5000/carbon/

3. 啟用手機 USB 除錯
   設定 > 關於手機 > 連點版本號 7 次
   開發人員選項 > USB 除錯

4. 連接手機到電腦

5. Run
```

### 情境 C: 建置 APK 分享

```bash
# 在 android_app 目錄

# Windows
gradlew.bat assembleDebug

# Mac/Linux
./gradlew assembleDebug

# APK 位置
# app/build/outputs/apk/debug/app-debug.apk

# 傳到手機安裝
```

---

## 🔧 快速修改

### 修改 App 名稱

```xml
<!-- app/src/main/res/values/strings.xml -->
<string name="app_name">你的App名稱</string>
```

### 修改主題色

```xml
<!-- app/src/main/res/values/colors.xml -->
<color name="primary">#你的顏色</color>
```

### 修改網址

```kotlin
// MainActivity.kt (第 24 行)
private val SERVER_URL = "你的網址"
```

---

## ❓ 快速問題排查

### 問題：Gradle 同步失敗

```
解決：
1. 檢查網路連線
2. File > Invalidate Caches > Invalidate and Restart
3. 重新同步
```

### 問題：找不到裝置

```
解決：
1. 模擬器：Tools > Device Manager > Create Device
2. 實體手機：啟用 USB 除錯並連接
3. 檢查 adb devices 是否顯示裝置
```

### 問題：白屏

```
解決：
1. 確認後端運行中
2. 檢查網址是否正確
3. 查看 Logcat 錯誤訊息
```

### 問題：無法連接

```
解決：
1. 模擬器用 10.0.2.2
2. 實體手機用電腦 IP
3. 檢查防火牆
4. 確認同一網路
```

---

## 📱 測試檢查表

執行以下測試確認 App 正常：

- [ ] App 成功啟動
- [ ] 首頁正常載入
- [ ] 可以導航到其他頁面
- [ ] 可以新增記錄
- [ ] 可以查看統計
- [ ] 下拉可以重新整理
- [ ] 返回鍵正常運作
- [ ] 旋轉螢幕正常

---

## 🎉 完成！

如果所有測試都通過，恭喜你！App 已經可以正常使用了！

### 下一步：

1. 在更多裝置測試
2. 建置 Release APK
3. 準備上架素材
4. 上架 Google Play

---

## 💡 小技巧

### 快速重新整理

```
在 App 中下拉即可重新整理頁面
```

### 查看 Console

```
1. Chrome 訪問 chrome://inspect
2. 找到你的 App
3. 點擊 inspect
4. 查看 Console 和 Network
```

### 快速安裝

```bash
# 直接安裝 APK 到連接的裝置
adb install -r app/build/outputs/apk/debug/app-debug.apk
```

---

**開始建置你的 Android App 吧！** 🚀
