<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI æ™ºæ…§æœå‹™å¹³å° - ç³»çµ±å…¥å£</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
          "Microsoft JhengHei", sans-serif;
        background: #e8e8e8;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        width: 100%;
      }

      .header {
        text-align: center;
        margin-bottom: 40px;
        color: #1a1a1a;
      }

      .header h1 {
        font-size: 42px;
        font-weight: 700;
        margin-bottom: 12px;
      }

      .header p {
        font-size: 18px;
        color: #4a4a4a;
      }

      .modules-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 24px;
        margin-bottom: 30px;
      }

      .module-card {
        background: white;
        border-radius: 12px;
        padding: 0;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        transition: all 0.3s ease;
        text-decoration: none;
        color: inherit;
        display: flex;
        flex-direction: column;
        border: 2px solid transparent;
        overflow: hidden;
      }

      .module-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
        border-color: #ddd;
      }

      .module-content {
        flex: 1;
        padding: 24px 28px;
      }

      .module-header {
        display: flex;
        align-items: center;
        gap: 10px;
        padding-bottom: 16px;
        margin-bottom: 16px;
        border-bottom: 1px solid #e9ecef;
      }

      .module-icon {
        font-size: 22px;
        line-height: 1;
      }

      .module-card h3 {
        font-size: 19px;
        font-weight: 600;
        margin: 0;
        color: #212529;
      }

      .module-body {
        padding-top: 0;
      }

      .module-card p {
        font-size: 14px;
        color: #6c757d;
        line-height: 1.6;
        margin-bottom: 16px;
      }

      .module-features {
        list-style: none;
        padding: 0;
        margin-bottom: 20px;
      }

      .module-features li {
        font-size: 13px;
        color: #495057;
        padding: 6px 0;
        padding-left: 20px;
        position: relative;
      }

      .module-features li:before {
        content: "âœ“";
        position: absolute;
        left: 0;
        color: #28a745;
        font-weight: bold;
      }

      .module-status {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 600;
        margin-bottom: 12px;
      }

      .status-active {
        background: #d1e7dd;
        color: #0f5132;
      }

      .status-new {
        background: #cfe2ff;
        color: #084298;
      }

      /* é•·æ¢ç‹€æŒ‰éˆ• */
      .module-button {
        display: block;
        width: 100%;
        padding: 14px 24px;
        background: #955f27;
        color: white;
        text-align: center;
        border-radius: 0;
        font-size: 15px;
        font-weight: 600;
        transition: all 0.2s ease;
        border: none;
        cursor: pointer;
        margin-top: auto;
      }

      .module-button:hover {
        background: #7a4d1f;
        transform: translateY(-2px);
      }

      .footer {
        text-align: center;
        color: #4a4a4a;
        margin-top: 40px;
      }

      .footer p {
        font-size: 14px;
      }

      @media (max-width: 768px) {
        .header h1 {
          font-size: 32px;
        }

        .modules-grid {
          grid-template-columns: 1fr;
        }
      }

      /* å‹•ç•«æ•ˆæœ */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .module-card {
        animation: fadeInUp 0.6s ease forwards;
      }

      .module-card:nth-child(1) {
        animation-delay: 0.1s;
      }
      .module-card:nth-child(2) {
        animation-delay: 0.2s;
      }
      .module-card:nth-child(3) {
        animation-delay: 0.3s;
      }
      .module-card:nth-child(4) {
        animation-delay: 0.4s;
      }
      .module-card:nth-child(5) {
        animation-delay: 0.5s;
      }
    </style>
    <!-- Material Icons -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/material-icons.css') }}">
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>æ™ºæ…§æœå‹™å¹³å°</h1>
      </div>

      <div class="modules-grid">
        <!-- èªéŸ³æ¸¬è©¦è¨“ç·´æ¨¡çµ„ -->
        <a href="/voice-testing" class="module-card">
          <div class="module-content">
            <div class="module-header">
              <div class="module-icon"><span class="material-icons">science</span></div>
              <h3>èªéŸ³æ¸¬è©¦è¨“ç·´æ¨¡çµ„</h3>
            </div>
            <div class="module-body">
              <span class="module-status status-active">é‹è¡Œä¸­</span>
              <p>
                å°ˆç‚ºèªéŸ³æŠ€è¡“é–‹ç™¼å’Œæ¸¬è©¦è¨­è¨ˆçš„å·¥å…·é›†ï¼Œä¾›é–‹ç™¼äººå“¡å’ŒæŠ€è¡“äººå“¡ä½¿ç”¨
              </p>
              <ul class="module-features">
                <li>èªéŸ³åˆ†æï¼ˆåŸºç¤/é€²éšæƒ…ç·’è­˜åˆ¥ï¼‰</li>
                <li>è²éŸ³æ¨¡æ“¬ï¼ˆTTS ç”Ÿæˆï¼‰</li>
                <li>èªéŸ³å…‹éš†èˆ‡å“è³ªè©•ä¼°</li>
                <li>æ‰¹æ¬¡åˆ†æèˆ‡å³æ™‚æ¸¬è©¦</li>
              </ul>
            </div>
          </div>
          <div class="module-button">é€²å…¥ç³»çµ± â†’</div>
        </a>

        <!-- ç¢³æ’æ”¾è¿½è¹¤ç³»çµ± -->
        <a href="/carbon" class="module-card">
          <div class="module-content">
            <div class="module-header">
              <div class="module-icon">ğŸŒ±</div>
              <h3>ç¢³æ’æ”¾è¿½è¹¤ç³»çµ±</h3>
            </div>
            <div class="module-body">
              <span class="module-status status-active">é‹è¡Œä¸­</span>
              <p>ç¤¾å·¥è¨ªè¦–ç¢³æ’æ”¾ç®¡ç†ç³»çµ±ï¼Œè¿½è¹¤äº¤é€šç¢³è¶³è·¡ï¼Œæ¨å‹•ç’°ä¿æœå‹™</p>
              <ul class="module-features">
                <li>è¨ªè¦–è¨˜éŒ„ç®¡ç†</li>
                <li>ç¢³æ’æ”¾è‡ªå‹•è¨ˆç®—</li>
                <li>çµ±è¨ˆå ±è¡¨åˆ†æ</li>
                <li>ç’°ä¿æ•ˆç›Šè©•ä¼°</li>
              </ul>
            </div>
          </div>
          <div class="module-button">é€²å…¥ç³»çµ± â†’</div>
        </a>

        <!-- å®šæœŸé—œæ‡·ç³»çµ± -->
        <a href="/api/voice-care/schedules-page" class="module-card">
          <div class="module-content">
            <div class="module-header">
              <div class="module-icon">ğŸ’</div>
              <h3>æ™ºæ…§èªéŸ³é—œæ‡·ç³»çµ±</h3>
            </div>
            <div class="module-body">
              <span class="module-status status-new">æœ€æ–°</span>
              <p>AI é©…å‹•çš„å®šæœŸé—œæ‡·æœå‹™ï¼Œæ”¯æ´é›™èªèªéŸ³åˆæˆèˆ‡è‡ªå‹•åŒ–æ’ç¨‹</p>
              <ul class="module-features">
                <li>å®šæœŸé—œæ‡·æ’ç¨‹ç®¡ç†</li>
                <li>åœ‹èª/é–©å—èªé›™èªæ”¯æ´</li>
                <li>AI è¨Šæ¯æ™ºèƒ½ç”Ÿæˆ</li>
                <li>é—œæ‡·æ•ˆæœçµ±è¨ˆåˆ†æ</li>
              </ul>
            </div>
          </div>
          <div class="module-button">é€²å…¥ç³»çµ± â†’</div>
        </a>

        <!-- å³æ™‚èªéŸ³äº’å‹• -->
        <a href="/voice_interaction_realtime/" class="module-card">
          <div class="module-content">
            <div class="module-header">
              <div class="module-icon"><span class="material-icons">record_voice_over</span></div>
              <h3>å³æ™‚èªéŸ³äº’å‹•</h3>
            </div>
            <div class="module-body">
              <span class="module-status status-new">æœ€æ–°</span>
              <p>å³æ™‚èªéŸ³è­˜åˆ¥èˆ‡ AI å°è©±ç³»çµ±ï¼Œæ”¯æ´åœ‹èªå’Œé–©å—èªé›™èªäº’å‹•</p>
              <ul class="module-features">
                <li>å³æ™‚èªéŸ³è­˜åˆ¥ï¼ˆQwen ASRï¼‰</li>
                <li>æ™ºèƒ½å°è©±å›æ‡‰ï¼ˆDeepSeekï¼‰</li>
                <li>æµå¼èªéŸ³åˆæˆï¼ˆQwen TTSï¼‰</li>
                <li>é›™èªæ”¯æ´ï¼ˆåœ‹èª/é–©å—èªï¼‰</li>
              </ul>
            </div>
          </div>
          <div class="module-button">é€²å…¥ç³»çµ± â†’</div>
        </a>

        <!-- AI å»£æ’­åŠ‡ç³»çµ± -->
        <a href="/api/audiobook/library" class="module-card">
          <div class="module-content">
            <div class="module-header">
              <div class="module-icon"><span class="material-icons">library_books</span></div>
              <h3>AI å»£æ’­åŠ‡ç³»çµ±</h3>
            </div>
            <div class="module-body">
              <span class="module-status status-new">æœ€æ–°</span>
              <p>æ™ºèƒ½å»£æ’­åŠ‡å‰µä½œå¹³å°ï¼Œè‡ªå‹•ç”ŸæˆåŠ‡æœ¬ä¸¦åˆæˆå¤šè§’è‰²èªéŸ³</p>
              <ul class="module-features">
                <li>AI åŠ‡æœ¬è‡ªå‹•ç”Ÿæˆ</li>
                <li>å¤šè§’è‰²èªéŸ³åˆæˆ</li>
                <li>é›™èªå…§å®¹æ”¯æ´</li>
                <li>ä½œå“åº«ç®¡ç†</li>
              </ul>
            </div>
          </div>
          <div class="module-button">é€²å…¥ç³»çµ± â†’</div>
        </a>
      </div>

      <div class="footer">
        <p>Â© 2024 AI æ™ºæ…§æœå‹™å¹³å° | æä¾›å‰µæ–°çš„ AI è§£æ±ºæ–¹æ¡ˆ</p>
      </div>
    </div>

    <!-- ç”¨æˆ¶è³‡è¨Šé¡¯ç¤º -->
    <div
      id="userInfo"
      style="
        display: none;
        position: fixed;
        top: 20px;
        right: 20px;
        background: white;
        padding: 12px 20px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        font-size: 14px;
      "
    >
      <span style="color: #666" id="userNameDisplay"></span>
      <button
        onclick="logout()"
        style="
          margin-left: 12px;
          padding: 4px 12px;
          border: 1px solid #e9ecef;
          border-radius: 4px;
          background: white;
          cursor: pointer;
          font-size: 12px;
        "
      >
        ç™»å‡º
      </button>
    </div>

    <script>
      // æª¢æŸ¥ç™»å…¥ç‹€æ…‹
      function checkLoginStatus() {
        const currentUser = localStorage.getItem("currentUser");
        if (!currentUser) {
          // æœªç™»å…¥ï¼Œè·³è½‰åˆ°ç™»å…¥é é¢
          window.location.href =
            "/login?return=" + encodeURIComponent(window.location.pathname);
          return false;
        }

        try {
          const userData = JSON.parse(currentUser);
          console.log(
            "<span class="material-icons">check_circle</span> ç”¨æˆ¶å·²ç™»å…¥:",
            userData.full_name || userData.username
          );

          // é¡¯ç¤ºç”¨æˆ¶è³‡è¨Š
          const userInfo = document.getElementById("userInfo");
          const userNameDisplay = document.getElementById("userNameDisplay");

          if (userInfo && userNameDisplay) {
            userNameDisplay.textContent =
              "<span class="material-icons">person</span> " + (userData.full_name || userData.username);
            userInfo.style.display = "block";
          }

          return true;
        } catch (error) {
          console.error("è§£æç”¨æˆ¶è³‡è¨Šå¤±æ•—:", error);
          localStorage.removeItem("currentUser");
          window.location.href = "/login";
          return false;
        }
      }

      // ç™»å‡ºåŠŸèƒ½
      function logout() {
        if (confirm("ç¢ºå®šè¦ç™»å‡ºå—ï¼Ÿ")) {
          localStorage.removeItem("currentUser");
          window.location.href = "/login";
        }
      }

      // é é¢è¼‰å…¥æ™‚æª¢æŸ¥ç™»å…¥ç‹€æ…‹
      window.addEventListener("DOMContentLoaded", function () {
        checkLoginStatus();
      });
    </script>
  </body>
</html>
