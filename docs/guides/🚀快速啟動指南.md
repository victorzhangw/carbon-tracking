# 🚀 碳排放追蹤系統 - 快速啟動指南

## ✅ 問題已解決！

**問題原因**：缺少 `whisper` 模組  
**解決方式**：已自動安裝

---

## 🎯 立即啟動（3 種方式）

### 方式 1：使用啟動腳本（最簡單）✨

```bash
# 雙擊執行
start_carbon_tracking.bat
```

這個腳本會自動：

- ✅ 檢查並安裝缺少的套件
- ✅ 檢查資料庫
- ✅ 測試系統
- ✅ 啟動 Flask 應用

---

### 方式 2：手動啟動

```bash
# 1. 確保在虛擬環境中
.\venv\Scripts\activate

# 2. 啟動應用
python app.py
```

---

### 方式 3：測試後啟動

```bash
# 1. 先測試系統
.\venv\Scripts\python test_carbon_system.py

# 2. 如果測試通過，啟動應用
.\venv\Scripts\python app.py
```

---

## 🌐 訪問系統

啟動成功後，開啟瀏覽器訪問：

### 主要頁面

- **首頁**：http://localhost:5000/carbon/
- **儀表板**：http://localhost:5000/carbon/dashboard
- **訪視記錄**：http://localhost:5000/carbon/visit-records
- **新增記錄**：http://localhost:5000/carbon/add-visit
- **統計報表**：http://localhost:5000/carbon/statistics

### API 端點

- **統計摘要**：http://localhost:5000/carbon/api/statistics-summary?start_date=2024-06-01&end_date=2024-09-30
- **訪視記錄**：http://localhost:5000/carbon/api/visit-records

---

## 🔍 啟動成功的標誌

當你看到以下訊息時，表示啟動成功：

```
 * Serving Flask app 'app'
 * Debug mode: on
WARNING: This is a development server. Do not use it in a production deployment.
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.x.x:5000
```

---

## ❌ 如果還是無法連線

### 檢查 1：確認 Flask 已啟動

```bash
# 應該看到 "Running on http://127.0.0.1:5000"
```

### 檢查 2：測試系統

```bash
.\venv\Scripts\python test_carbon_system.py
```

應該看到：

```
✓ 資料庫連線成功
✓ 路由模組載入成功
✓ Flask應用載入成功
✓ /carbon/ 回應狀態：200
✓ API 回應狀態：200
```

### 檢查 3：確認端口沒被佔用

```bash
# 檢查5000端口
netstat -ano | findstr :5000
```

如果端口被佔用，可以修改 app.py 中的端口號：

```python
app.run(debug=True, host='0.0.0.0', port=5001)  # 改為5001
```

### 檢查 4：防火牆設定

確保 Windows 防火牆允許 Python 訪問網路。

---

## 🛠️ 常見問題

### Q1：顯示 "ModuleNotFoundError: No module named 'whisper'"

**A**：執行以下命令安裝：

```bash
.\venv\Scripts\pip install openai-whisper
```

### Q2：顯示 "No module named 'flask'"

**A**：執行以下命令安裝：

```bash
.\venv\Scripts\pip install flask flask-cors
```

### Q3：資料庫錯誤

**A**：重新生成資料庫：

```bash
del carbon_tracking.db
.\venv\Scripts\python generate_mock_carbon_data.py
```

### Q4：頁面顯示 404

**A**：確認訪問的網址正確：

- ✓ http://localhost:5000/carbon/
- ✗ http://localhost:5000/carbon（少了斜線）

---

## 📸 成功啟動後的截圖步驟

1. **開啟首頁**

   - 訪問：http://localhost:5000/carbon/
   - 截圖保存

2. **開啟儀表板**

   - 訪問：http://localhost:5000/carbon/dashboard
   - 等待圖表載入
   - 截圖保存

3. **查看訪視記錄**

   - 訪問：http://localhost:5000/carbon/visit-records
   - 截圖保存

4. **查看統計報表**
   - 訪問：http://localhost:5000/carbon/statistics
   - 截圖保存

---

## 💡 提示

### 如果瀏覽器顯示「無法連上這個網站」

1. **確認 Flask 已啟動**

   - 命令提示字元應該顯示 "Running on..."
   - 不要關閉命令提示字元視窗

2. **等待幾秒**

   - Flask 啟動需要幾秒鐘
   - 看到 "Running on" 訊息後再開啟瀏覽器

3. **使用正確的網址**

   - http://localhost:5000/carbon/
   - 或 http://127.0.0.1:5000/carbon/

4. **重新整理頁面**
   - 按 F5 或 Ctrl+R

---

## ✅ 驗證清單

啟動前檢查：

- [ ] 虛擬環境已啟動
- [ ] whisper 模組已安裝
- [ ] 資料庫檔案存在（carbon_tracking.db）
- [ ] 5000 端口未被佔用

啟動後檢查：

- [ ] 命令提示字元顯示 "Running on..."
- [ ] 沒有錯誤訊息
- [ ] 可以訪問 http://localhost:5000/carbon/
- [ ] 頁面正常顯示

---

## 🎉 成功！

如果你能看到碳排放追蹤系統的首頁，恭喜你成功啟動了！

現在你可以：

- ✅ 瀏覽儀表板
- ✅ 查看訪視記錄
- ✅ 新增記錄
- ✅ 查看統計報表
- ✅ 截圖作為佐證

---

## 📞 需要協助？

如果還有問題，請：

1. 執行測試腳本：`.\venv\Scripts\python test_carbon_system.py`
2. 查看錯誤訊息
3. 檢查上述常見問題

---

**祝你使用愉快！** 🎊
