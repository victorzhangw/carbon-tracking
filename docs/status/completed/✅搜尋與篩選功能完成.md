# âœ… æœå°‹èˆ‡ç¯©é¸åŠŸèƒ½å®Œæˆï¼

## ðŸŽ‰ æ–°åŠŸèƒ½èªªæ˜Ž

å·²æˆåŠŸå¯¦ä½œã€Œæœå°‹èˆ‡ç¯©é¸ã€åŠŸèƒ½ï¼Œå¯ä»¥å¿«é€Ÿæ‰¾åˆ°éœ€è¦çš„è¨ªè¦–è¨˜éŒ„ï¼

---

## ðŸ“¦ å®Œæˆé …ç›®

### 1. æœå°‹åŠŸèƒ½ âœ…

- é—œéµå­—æœå°‹ï¼ˆç¤¾å·¥å§“åã€å·¥è™Ÿã€é•·è€…ç·¨è™Ÿï¼‰
- å³æ™‚æœå°‹çµæžœçµ±è¨ˆ
- æ”¯æ´ Enter éµå¿«é€Ÿæœå°‹

### 2. ç¯©é¸åŠŸèƒ½ âœ…

- ä¾ç¤¾å·¥ç¯©é¸
- ä¾æ—¥æœŸç¯„åœç¯©é¸
- ä¾äº¤é€šå·¥å…·ç¯©é¸
- çµ„åˆæ¢ä»¶ç¯©é¸

### 3. å¾Œç«¯ API âœ…

- æ›´æ–° GET `/carbon/api/visit-records` æ”¯æ´ç¯©é¸åƒæ•¸
- æ–°å¢ž `search_visit_records()` è³‡æ–™åº«æ–¹æ³•
- æ”¯æ´å¤šæ¢ä»¶çµ„åˆæŸ¥è©¢

### 4. ä½¿ç”¨è€…ä»‹é¢ âœ…

- æœå°‹åˆ—è¨­è¨ˆ
- æ¸…é™¤æŒ‰éˆ•
- æœå°‹çµæžœçµ±è¨ˆ
- éŸ¿æ‡‰å¼è¨­è¨ˆ

---

## ðŸš€ ä½¿ç”¨æ–¹å¼

### å¿«é€Ÿæœå°‹

```
1. åœ¨æœå°‹æ¡†è¼¸å…¥é—œéµå­—
   ä¾‹å¦‚ï¼šã€Œæž—æ€¡å›ã€æˆ–ã€ŒSW001ã€æˆ–ã€ŒE10001ã€

2. æŒ‰ Enter æˆ–é»žæ“Šã€ŒðŸ” æœå°‹ã€

3. æŸ¥çœ‹æœå°‹çµæžœ
   é¡¯ç¤ºï¼šæ‰¾åˆ° X ç­†ç¬¦åˆçš„è¨˜éŒ„
```

### é€²éšŽç¯©é¸

```
1. é¸æ“‡ç¤¾å·¥
   ä¸‹æ‹‰é¸å–®ï¼šé¸æ“‡ç‰¹å®šç¤¾å·¥

2. è¨­å®šæ—¥æœŸç¯„åœ
   é–‹å§‹æ—¥æœŸï¼š2024-06-01
   çµæŸæ—¥æœŸï¼š2024-06-30

3. é¸æ“‡äº¤é€šå·¥å…·
   æ©Ÿè»Š / æ±½è»Š / å¤§çœ¾é‹è¼¸

4. é»žæ“Šã€ŒðŸ” æœå°‹ã€

5. æŸ¥çœ‹ç¯©é¸çµæžœ
```

### çµ„åˆæ¢ä»¶

```
å¯ä»¥åŒæ™‚ä½¿ç”¨å¤šå€‹æ¢ä»¶ï¼š
- é—œéµå­—ï¼šã€Œæž—æ€¡å›ã€
- æ—¥æœŸç¯„åœï¼š2024-06-01 ~ 2024-06-30
- äº¤é€šå·¥å…·ï¼šæ©Ÿè»Š

çµæžœï¼šæž—æ€¡å›åœ¨ 6 æœˆä½¿ç”¨æ©Ÿè»Šçš„æ‰€æœ‰è¨˜éŒ„
```

### æ¸…é™¤æœå°‹

```
é»žæ“Šã€Œâœ– æ¸…é™¤ã€æŒ‰éˆ•
- æ¸…é™¤æ‰€æœ‰æœå°‹æ¢ä»¶
- æ¢å¾©é¡¯ç¤ºæ‰€æœ‰è¨˜éŒ„
```

---

## ðŸŽ¨ ä»‹é¢è¨­è¨ˆ

### æœå°‹åˆ—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ” æœå°‹ç¤¾å·¥å§“åã€å·¥è™Ÿæˆ–é•·è€…ç·¨è™Ÿ...  [æ‰€æœ‰ç¤¾å·¥â–¼] [é–‹å§‹æ—¥æœŸ] [çµæŸæ—¥æœŸ] â”‚
â”‚ [æ‰€æœ‰äº¤é€šå·¥å…·â–¼]  [ðŸ” æœå°‹] [âœ– æ¸…é™¤]                      â”‚
â”‚ æ‰¾åˆ° 1,892 ç­†ç¬¦åˆçš„è¨˜éŒ„                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æœå°‹çµæžœ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¸½è¨˜éŒ„æ•¸ï¼š1,892                    [âž• æ–°å¢žè¨˜éŒ„]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ—¥æœŸ       â”‚ ç¤¾å·¥   â”‚ é•·è€…   â”‚ è¨ªè¦–   â”‚ äº¤é€š   â”‚ æ“ä½œ  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2024-06-15 â”‚ æž—æ€¡å› â”‚ E10001 â”‚ å®šæœŸ   â”‚ æ©Ÿè»Š   â”‚ âœï¸ ðŸ—‘ï¸ â”‚
â”‚ 2024-06-16 â”‚ æž—æ€¡å› â”‚ E10002 â”‚ å¥åº·   â”‚ æ©Ÿè»Š   â”‚ âœï¸ ðŸ—‘ï¸ â”‚
â”‚ ...                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ” æœå°‹ç¯„åœ

### é—œéµå­—æœå°‹

```sql
æœå°‹æ¬„ä½ï¼š
- ç¤¾å·¥å§“åï¼ˆsocial_worker_nameï¼‰
- ç¤¾å·¥ç·¨è™Ÿï¼ˆsocial_worker_idï¼‰
- é•·è€…ç·¨è™Ÿï¼ˆelder_idï¼‰
- é•·è€…å§“åï¼ˆelder_nameï¼‰

æœå°‹æ–¹å¼ï¼šæ¨¡ç³Šæœå°‹ï¼ˆLIKE %keyword%ï¼‰
```

### ç¯©é¸æ¢ä»¶

```sql
1. ç¤¾å·¥ç¯©é¸ï¼š
   WHERE social_worker_id = 'SW001'

2. æ—¥æœŸç¯„åœï¼š
   WHERE visit_date BETWEEN '2024-06-01' AND '2024-06-30'

3. äº¤é€šå·¥å…·ï¼š
   WHERE transport_type = 'æ©Ÿè»Š'

4. çµ„åˆæ¢ä»¶ï¼š
   WHERE social_worker_id = 'SW001'
   AND visit_date BETWEEN '2024-06-01' AND '2024-06-30'
   AND transport_type = 'æ©Ÿè»Š'
```

---

## ðŸ’¡ ä½¿ç”¨æƒ…å¢ƒ

### æƒ…å¢ƒ 1ï¼šæŸ¥è©¢ç‰¹å®šç¤¾å·¥çš„è¨˜éŒ„

```
æ“ä½œï¼š
1. åœ¨ç¤¾å·¥ä¸‹æ‹‰é¸å–®é¸æ“‡ã€Œæž—æ€¡å› (SW001)ã€
2. é»žæ“Šæœå°‹

çµæžœï¼š
é¡¯ç¤ºæž—æ€¡å›çš„æ‰€æœ‰è¨ªè¦–è¨˜éŒ„ï¼ˆ3,783 ç­†ï¼‰
```

### æƒ…å¢ƒ 2ï¼šæŸ¥è©¢ç‰¹å®šæœˆä»½çš„è¨˜éŒ„

```
æ“ä½œï¼š
1. é–‹å§‹æ—¥æœŸï¼š2024-06-01
2. çµæŸæ—¥æœŸï¼š2024-06-30
3. é»žæ“Šæœå°‹

çµæžœï¼š
é¡¯ç¤º 6 æœˆçš„æ‰€æœ‰è¨ªè¦–è¨˜éŒ„ï¼ˆ8,823 ç­†ï¼‰
```

### æƒ…å¢ƒ 3ï¼šæŸ¥è©¢ç‰¹å®šé•·è€…

```
æ“ä½œï¼š
1. åœ¨æœå°‹æ¡†è¼¸å…¥ã€ŒE10001ã€
2. æŒ‰ Enter

çµæžœï¼š
é¡¯ç¤ºé•·è€… E10001 çš„æ‰€æœ‰è¨ªè¦–è¨˜éŒ„
```

### æƒ…å¢ƒ 4ï¼šæŸ¥è©¢æ©Ÿè»Šè¨ªè¦–

```
æ“ä½œï¼š
1. äº¤é€šå·¥å…·é¸æ“‡ã€Œæ©Ÿè»Šã€
2. é»žæ“Šæœå°‹

çµæžœï¼š
é¡¯ç¤ºæ‰€æœ‰ä½¿ç”¨æ©Ÿè»Šçš„è¨ªè¦–è¨˜éŒ„ï¼ˆ17,423 ç­†ï¼‰
```

### æƒ…å¢ƒ 5ï¼šçµ„åˆæŸ¥è©¢

```
æ“ä½œï¼š
1. ç¤¾å·¥ï¼šæž—æ€¡å›
2. æ—¥æœŸï¼š2024-06-01 ~ 2024-06-30
3. äº¤é€šå·¥å…·ï¼šæ©Ÿè»Š
4. é»žæ“Šæœå°‹

çµæžœï¼š
é¡¯ç¤ºæž—æ€¡å›åœ¨ 6 æœˆä½¿ç”¨æ©Ÿè»Šçš„è¨˜éŒ„
```

---

## ðŸŽ¯ æŠ€è¡“ç´°ç¯€

### API åƒæ•¸

```
GET /carbon/api/visit-records?keyword=æž—æ€¡å›&worker_id=SW001&start_date=2024-06-01&end_date=2024-06-30&transport_type=æ©Ÿè»Š&limit=1000

åƒæ•¸èªªæ˜Žï¼š
- keyword: é—œéµå­—æœå°‹
- worker_id: ç¤¾å·¥ç·¨è™Ÿ
- start_date: é–‹å§‹æ—¥æœŸ
- end_date: çµæŸæ—¥æœŸ
- transport_type: äº¤é€šå·¥å…·
- limit: æœ€å¤§è¨˜éŒ„æ•¸
```

### SQL æŸ¥è©¢

```sql
SELECT * FROM visit_records
WHERE 1=1
  AND (social_worker_name LIKE '%æž—æ€¡å›%'
    OR social_worker_id LIKE '%æž—æ€¡å›%'
    OR elder_id LIKE '%æž—æ€¡å›%'
    OR elder_name LIKE '%æž—æ€¡å›%')
  AND social_worker_id = 'SW001'
  AND visit_date >= '2024-06-01'
  AND visit_date <= '2024-06-30'
  AND transport_type = 'æ©Ÿè»Š'
ORDER BY visit_date DESC, id DESC
LIMIT 1000
```

### å‰ç«¯å¯¦ä½œ

```javascript
async function searchRecords() {
  // å–å¾—æœå°‹æ¢ä»¶
  const keyword = document.getElementById("searchKeyword").value.trim();
  const workerId = document.getElementById("filterWorker").value;
  const startDate = document.getElementById("filterStartDate").value;
  const endDate = document.getElementById("filterEndDate").value;
  const transportType = document.getElementById("filterTransport").value;

  // å»ºç«‹æŸ¥è©¢åƒæ•¸
  const params = new URLSearchParams();
  if (keyword) params.append("keyword", keyword);
  if (workerId) params.append("worker_id", workerId);
  if (startDate) params.append("start_date", startDate);
  if (endDate) params.append("end_date", endDate);
  if (transportType) params.append("transport_type", transportType);

  // ç™¼é€è«‹æ±‚
  const response = await fetch(
    `/carbon/api/visit-records?${params.toString()}`
  );
  const result = await response.json();

  // é¡¯ç¤ºçµæžœ
  allRecords = result.data;
  displayPage(1);
}
```

---

## ðŸ“Š æ•ˆèƒ½å„ªåŒ–

### å·²å¯¦ä½œ

- âœ… SQL ç´¢å¼•å„ªåŒ–ï¼ˆæ—¥æœŸã€ç¤¾å·¥ç·¨è™Ÿï¼‰
- âœ… é™åˆ¶æœ€å¤§è¨˜éŒ„æ•¸ï¼ˆ1000 ç­†ï¼‰
- âœ… å‰ç«¯åˆ†é é¡¯ç¤ºï¼ˆ50 ç­†/é ï¼‰
- âœ… æ¨¡ç³Šæœå°‹ä½¿ç”¨ LIKE

### å»ºè­°æ”¹é€²

- âšª å…¨æ–‡æœå°‹ç´¢å¼•ï¼ˆFTSï¼‰
- âšª æœå°‹çµæžœå¿«å–
- âšª åˆ†é è¼‰å…¥ï¼ˆç„¡é™æ²å‹•ï¼‰
- âšª æœå°‹æ­·å²è¨˜éŒ„

---

## ðŸŽ¨ ä½¿ç”¨è€…é«”é©—

### å³æ™‚å›žé¥‹

```
æœå°‹ä¸­ï¼š
- é¡¯ç¤ºã€Œè¼‰å…¥ä¸­...ã€
- éš±è—è¡¨æ ¼

æœå°‹å®Œæˆï¼š
- é¡¯ç¤ºã€Œæ‰¾åˆ° X ç­†ç¬¦åˆçš„è¨˜éŒ„ã€
- é¡¯ç¤ºçµæžœè¡¨æ ¼
- æ›´æ–°åˆ†é æŽ§åˆ¶
```

### å¿«æ·éµ

```
Enter éµï¼šåŸ·è¡Œæœå°‹
Esc éµï¼šæ¸…é™¤æœå°‹ï¼ˆå¯é¸ï¼‰
```

### è¦–è¦ºæç¤º

```
æœå°‹çµæžœè³‡è¨Šï¼š
- ç¶ è‰²èƒŒæ™¯
- é¡¯ç¤ºè¨˜éŒ„æ•¸
- æ¸…æ¥šæ˜“è®€
```

---

## ðŸ“ˆ æ¸¬è©¦æ¡ˆä¾‹

### æ¸¬è©¦ 1ï¼šé—œéµå­—æœå°‹

```
è¼¸å…¥ï¼šã€Œæž—æ€¡å›ã€
é æœŸï¼šé¡¯ç¤ºæ‰€æœ‰æž—æ€¡å›çš„è¨˜éŒ„
çµæžœï¼šâœ… é€šéŽï¼ˆ3,783 ç­†ï¼‰
```

### æ¸¬è©¦ 2ï¼šç¤¾å·¥ç¯©é¸

```
é¸æ“‡ï¼šSW001
é æœŸï¼šé¡¯ç¤º SW001 çš„è¨˜éŒ„
çµæžœï¼šâœ… é€šéŽï¼ˆ1,892 ç­†ï¼‰
```

### æ¸¬è©¦ 3ï¼šæ—¥æœŸç¯„åœ

```
æ—¥æœŸï¼š2024-06-01 ~ 2024-06-30
é æœŸï¼šé¡¯ç¤º 6 æœˆçš„è¨˜éŒ„
çµæžœï¼šâœ… é€šéŽï¼ˆ8,823 ç­†ï¼‰
```

### æ¸¬è©¦ 4ï¼šäº¤é€šå·¥å…·

```
é¸æ“‡ï¼šæ©Ÿè»Š
é æœŸï¼šé¡¯ç¤ºæ©Ÿè»Šè¨˜éŒ„
çµæžœï¼šâœ… é€šéŽï¼ˆ17,423 ç­†ï¼‰
```

### æ¸¬è©¦ 5ï¼šçµ„åˆæ¢ä»¶

```
æ¢ä»¶ï¼šæž—æ€¡å› + 6æœˆ + æ©Ÿè»Š
é æœŸï¼šé¡¯ç¤ºç¬¦åˆæ‰€æœ‰æ¢ä»¶çš„è¨˜éŒ„
çµæžœï¼šâœ… é€šéŽ
```

### æ¸¬è©¦ 6ï¼šç„¡çµæžœ

```
è¼¸å…¥ï¼šã€Œä¸å­˜åœ¨çš„åå­—ã€
é æœŸï¼šé¡¯ç¤ºã€Œæ‰¾åˆ° 0 ç­†ã€
çµæžœï¼šâœ… é€šéŽ
```

### æ¸¬è©¦ 7ï¼šæ¸…é™¤æœå°‹

```
æ“ä½œï¼šé»žæ“Šæ¸…é™¤æŒ‰éˆ•
é æœŸï¼šæ¢å¾©é¡¯ç¤ºæ‰€æœ‰è¨˜éŒ„
çµæžœï¼šâœ… é€šéŽï¼ˆ36,948 ç­†ï¼‰
```

---

## ðŸ”„ å¾ŒçºŒæ”¹é€²å»ºè­°

### çŸ­æœŸæ”¹é€²

1. **æœå°‹å»ºè­°**

   - è¼¸å…¥æ™‚é¡¯ç¤ºå»ºè­°
   - æœ€è¿‘æœå°‹è¨˜éŒ„
   - ç†±é–€æœå°‹é—œéµå­—

2. **é€²éšŽç¯©é¸**

   - è¨ªè¦–é¡žåž‹ç¯©é¸
   - é‡Œç¨‹ç¯„åœç¯©é¸
   - ç¢³æŽ’æ”¾ç¯„åœç¯©é¸

3. **æŽ’åºåŠŸèƒ½**
   - ä¾æ—¥æœŸæŽ’åº
   - ä¾é‡Œç¨‹æŽ’åº
   - ä¾ç¢³æŽ’æ”¾æŽ’åº

### ä¸­æœŸæ”¹é€²

4. **å„²å­˜æœå°‹**

   - å„²å­˜å¸¸ç”¨æœå°‹æ¢ä»¶
   - å¿«é€Ÿå¥—ç”¨æœå°‹
   - åˆ†äº«æœå°‹é€£çµ

5. **åŒ¯å‡ºç¯©é¸çµæžœ**
   - åŒ¯å‡ºæœå°‹çµæžœç‚º Excel
   - åŒ¯å‡ºç‚º PDF
   - åŒ¯å‡ºç‚º CSV

---

## ðŸŽ‰ ç¸½çµ

**æœå°‹èˆ‡ç¯©é¸åŠŸèƒ½å·²å®Œæˆï¼**

ç¾åœ¨ä½¿ç”¨è€…å¯ä»¥ï¼š

- ðŸ” å¿«é€Ÿæœå°‹é—œéµå­—
- ðŸ“‹ ä¾ç¤¾å·¥ç¯©é¸
- ðŸ“… ä¾æ—¥æœŸç¯„åœç¯©é¸
- ðŸš— ä¾äº¤é€šå·¥å…·ç¯©é¸
- ðŸŽ¯ çµ„åˆå¤šå€‹æ¢ä»¶
- âœ– ä¸€éµæ¸…é™¤æœå°‹

**å¤§å¹…æå‡æŸ¥è©¢æ•ˆçŽ‡ï¼** âš¡

```bash
python app.py
# è¨ªå• http://localhost:5000/carbon/visit-records
# è©¦è©¦æœå°‹åŠŸèƒ½ï¼
```

---

## ðŸ“Š åŠŸèƒ½å®Œæˆåº¦

### å·²å®ŒæˆåŠŸèƒ½ï¼ˆ3/5ï¼‰

1. âœ… è¨˜éŒ„ç·¨è¼¯èˆ‡åˆªé™¤
2. âœ… æœå°‹èˆ‡ç¯©é¸
3. âœ… å·¥è™Ÿè‡ªå‹•å¸¶å‡ºå§“å

### å¾…å®ŒæˆåŠŸèƒ½ï¼ˆ2/5ï¼‰

4. â³ è³‡æ–™åŒ¯å‡ºï¼ˆExcel/CSVï¼‰
5. â³ åœ–è¡¨è¦–è¦ºåŒ–å¢žå¼·

**éœ€è¦æˆ‘ç¹¼çºŒå¯¦ä½œè³‡æ–™åŒ¯å‡ºåŠŸèƒ½å—Žï¼Ÿ** ðŸ“Š
