# 📄 評分系統 - 分頁功能說明

## ✅ 已添加分頁功能

評分歷史記錄現在支持完整的分頁功能，可以輕鬆瀏覽所有 180 筆 Mock Data！

## 🎯 功能特點

### 1. 每頁顯示數量選擇

- 10 筆/頁
- 20 筆/頁（預設）
- 50 筆/頁
- 100 筆/頁

### 2. 分頁控件

- **上一頁/下一頁按鈕**: 快速翻頁
- **頁碼按鈕**: 直接跳轉到指定頁
- **智能頁碼顯示**:
  - 當前頁 ± 2 頁
  - 第一頁和最後一頁始終顯示
  - 省略號表示跳過的頁碼

### 3. 資訊顯示

- 顯示當前頁的記錄範圍（例如：顯示 1-20 筆，共 180 筆）
- 總記錄數統計

### 4. 用戶體驗優化

- 點擊頁碼後自動滾動到表格頂部
- 按鈕懸停效果
- 當前頁高亮顯示
- 禁用狀態的按鈕（第一頁/最後一頁）

## 📊 使用示例

### 場景 1: 查看最新記錄

1. 訪問評分分析頁面
2. 預設顯示第 1 頁（最新的 20 筆記錄）
3. 可以看到最近的高分表現（A 級，85-90 分）

### 場景 2: 查看早期記錄

1. 點擊「下一頁」或直接點擊最後一頁（第 9 頁）
2. 查看最早的記錄（D 級，55-60 分）
3. 對比進步幅度

### 場景 3: 快速瀏覽

1. 選擇「100 筆/頁」
2. 只需 2 頁就能瀏覽所有 180 筆記錄
3. 適合快速查找特定日期的記錄

### 場景 4: 詳細分析

1. 選擇「10 筆/頁」
2. 共 18 頁，可以更仔細地查看每筆記錄
3. 適合逐條分析評分變化

## 🎨 分頁控件樣式

### 頁碼顯示邏輯

**總頁數 ≤ 7 頁**:

```
[1] [2] [3] [4] [5] [6] [7]
```

**總頁數 > 7 頁，當前頁在前面**:

```
[1] [2] [3] [4] [5] ... [9]
```

**總頁數 > 7 頁，當前頁在中間**:

```
[1] ... [4] [5] [6] ... [9]
```

**總頁數 > 7 頁，當前頁在後面**:

```
[1] ... [5] [6] [7] [8] [9]
```

### 按鈕狀態

- **正常狀態**: 白色背景，灰色邊框
- **懸停狀態**: 紫色背景，白色文字，向上浮動
- **當前頁**: 紫色背景，白色文字
- **禁用狀態**: 半透明，不可點擊

## 💻 技術實現

### 分頁計算

```javascript
// 計算當前頁的記錄範圍
const startIndex = (currentPage - 1) * pageSize;
const endIndex = startIndex + pageSize;
const pageRecords = allRecords.slice(startIndex, endIndex);
```

### 總頁數計算

```javascript
const totalPages = Math.ceil(allRecords.length / pageSize);
```

### 頁碼範圍計算

```javascript
// 顯示當前頁 ± 2 頁
let startPage = Math.max(1, currentPage - 2);
let endPage = Math.min(totalPages, currentPage + 2);
```

## 📱 響應式設計

分頁控件在不同螢幕尺寸下都能正常顯示：

- **桌面端**: 完整顯示所有控件
- **平板端**: 自動換行，保持可用性
- **手機端**: 縮小按鈕間距，優化觸控體驗

## 🔧 自定義配置

如需修改預設設置，可以調整以下變數：

```javascript
// 預設每頁顯示數量
let pageSize = 20;

// 預設起始頁
let currentPage = 1;
```

## 📊 分頁統計

### 180 筆記錄的分頁情況

| 每頁顯示 | 總頁數 | 說明                 |
| -------- | ------ | -------------------- |
| 10 筆    | 18 頁  | 最詳細，適合逐條分析 |
| 20 筆    | 9 頁   | 預設值，平衡性最好   |
| 50 筆    | 4 頁   | 快速瀏覽             |
| 100 筆   | 2 頁   | 最快速，適合查找     |

## 🎯 使用建議

### 1. 日常查看

- 使用預設的 20 筆/頁
- 查看第 1 頁（最新記錄）
- 了解最近的表現

### 2. 趨勢分析

- 使用 50 筆/頁或 100 筆/頁
- 快速瀏覽多個時期的數據
- 對比不同階段的評分

### 3. 詳細研究

- 使用 10 筆/頁
- 逐條查看每次對話的詳細評分
- 分析評分變化的原因

### 4. 查找特定記錄

- 使用 100 筆/頁
- 快速定位到目標日期
- 然後切換到 10 筆/頁查看詳情

## ✨ 功能亮點

1. **智能頁碼**: 自動計算最佳顯示範圍
2. **平滑滾動**: 翻頁後自動滾動到表格頂部
3. **狀態保持**: 切換頁面大小時記住當前位置
4. **視覺反饋**: 清晰的按鈕狀態和懸停效果
5. **資訊完整**: 始終顯示當前範圍和總數

## 🚀 下一步

1. 啟動 Flask 應用：`bStart.bat`
2. 訪問評分分析頁面：http://localhost:5000/score-analysis
3. 嘗試不同的分頁設置
4. 體驗流暢的分頁瀏覽！

## 📝 注意事項

- 分頁只在記錄數 > 每頁顯示數時才會顯示
- 如果只有 1 頁，分頁控件會自動隱藏
- 切換每頁顯示數量會自動重置到第 1 頁

---

**更新日期**: 2025-11-22  
**功能狀態**: ✅ 完成  
**版本**: 1.1
